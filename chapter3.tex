% !TeX root = main.tex

\chapter{Banach空间的对偶理论}
\section{半范数}
	\begin{Definition}[半范数]\label{def:半范数}\index{B!半范数}
		设 $ E $ 是数域\K 上的线性空间, 托 $ E $ 上的泛函 $ p : E\to \R $ 满足
		\begin{enumerate}[(1)]
			\item 非负性: $ \forall x\in E\,(p(x)\geqslant0) $;
			\item 齐次性: $ \forall \lambda\in\K\,(p(\lambda x)=\abs{\lambda}p(x)) $;
			\item 三角不等式: $ \forall x, y\in E\,(p(x+y)\leqslant p(x)+p(y)) $.
		\end{enumerate}
		则称 $ p $ 是 $ E $ 的一个\textbf{半范数}. 
	\end{Definition}
	例如: $ E $ 上的范数 $ \norm{\cdot} $ 是一个半范数, 且对 $ f\in \Star{E} $,  $ \abs{f} $ 是一个半范数.
	\begin{Definition}[平衡, 吸收]\label{def:平衡吸收}
		设 $ E $ 是数域 \K 上的线性空间,  $ A\subset E $, 则
		\begin{enumerate}[(1)]
			\item 若 $ \forall\abs{\lambda}\leqslant1\,\forall x\in A\,(\lambda x\in A) $, 则称 $ A $ 是\textbf{平衡}的;\index{P!平衡}
			\item 若 $ \forall x\in E\,\exists \alpha>0\,(\abs{\lambda}\leqslant\alpha\Rightarrow\lambda x \in A) $, 则称 $ A $ 是\textbf{吸收}的. \index{X!吸收}
			\item 若 $ x\in A\Rightarrow -x\in A $, 则称 $ A $ 是\textbf{对称}的. \index{D!对称} 
		\end{enumerate}
	\end{Definition}
	可以从图~\ref{fig:平衡吸收}~来理解平衡和吸收的概念
	\begin{figure}[hp!]
		\begin{center}	
		\begin{tikzpicture}
			\draw[-latex] (-1,0) -- (1,0) node[below] {$ \scriptstyle{x} $};
			\draw[-latex] (0,-1) -- (0,1) node[right] {$ \scriptstyle{y} $};
			\draw (-1,-0.5) -- (1,0.5); 
			\node (A1) at (0,-1.3) {\zihao{6} 平衡, 不吸收};
			\node (B1) at (0.75,-0.75) {$ \mathbb{R}^{2} $};
			\filldraw[fill=gray!30] (4,0) circle[radius=0.75];
			\draw[-latex] (3,0) -- (5,0) node[below] {$ \scriptstyle{x} $};
			\draw[-latex] (4,-1) -- (4,1) node[right] {$ \scriptstyle{y} $};
			\node (A2) at (4,-1.3) {\zihao{6} 平衡, 吸收};
			\node (B2) at (4.8,-0.8) {$ \mathbb{C} $};
			\filldraw[fill=gray!30] (7.25,-0.75) rectangle (8.75,0.75); 
			\draw[-latex] (7,0) -- (9,0) node[below] {$ \scriptstyle{x} $};
			\draw[-latex] (8,-1) -- (8,1) node[right] {$ \scriptstyle{y} $};
			\node (A3) at (8,-1.3) {\zihao{6} 平衡, 吸收, 凸集};
			\node (B3) at (9,-0.8) {$ \mathbb{R}^{2} $};
			\filldraw[fill=gray!30] (11.5,-0.5) -- (12.25,0.75) -- ++(0,-0.5) -- ++(0.5,0) -- cycle;
			\draw[-latex] (11,0) -- ++(2,0) node[below] {$ \scriptstyle{x} $};
			\draw[-latex] (12,-1) -- ++(0,2) node[right] {$ \scriptstyle{y} $};
			\node (A4) at (12,-1.3)  {\zihao{6} 不平衡, 吸收} ;
			\node (B4) at (12.75,-0.75) {$ \mathbb{R}^{2} $};
		\end{tikzpicture}
		\caption{平衡， 吸收图例}\label{fig:平衡吸收}
		\end{center}
	\end{figure}


	\begin{Definition}[Minkowski泛函]\label{def:Minkowski泛函}\index{M!Minkowski泛函}
		设 $ E $ 是线性空间,  $ \varOmega $ 是 $ E $ 中平衡吸收的凸集, 则称
		\[
			P_{\varOmega} : E\to\R\quad x\mapsto \inf\left\{ \lambda>0:\frac{x}{\lambda}\in\varOmega \right\}
		\]
		为对应于 $ \varOmega $ 的 \textbf{Minkowski 泛函}.
	\end{Definition}
	\begin{Theorem}\label{thm:M凸}
		设 $ E $ 是线性空间,  $ \varOmega, \varOmega_{1}, \varOmega_{2} $ 是平衡吸收的凸集, 则:
		\begin{enumerate}[(1)]
			\item $ p_{\varOmega} $ 是 $ E $ 上的半范数, 且 $ \varOmega\subset\left\{ x\in E : p_{\varOmega}(x)\leqslant1 \right\} $;
			\item 若 $ \varOmega_{1}\subset\varOmega_{2} $, 则 $ p_{\varOmega_{1}}\geqslant p_{\varOmega_{2}} $;
			\item 设 $ \varOmega_{3}=\varOmega_{1}\cap \varOmega_{2} $, 则 $ p_{\varOmega_{3}}\geqslant\max\left\{ p_{\varOmega_{1}}, p_{\varOmega_{2}} \right\} $.
		\end{enumerate}
	\end{Theorem}
	\begin{Proof}
		(1) 取 $ I(x)=\left\{ \lambda>0 : \frac{x}{\lambda}\in\varOmega \right\} $. 若 $ \lambda\in I(x) $, 则 $ \forall \mu>\lambda $, 有 $ \frac{x}{\mu}=\frac{x}{\lambda}\cdot\frac{\lambda}{\mu}\in\varOmega $, 故 $ \mu\in I(x) $, 即 $ I(x) $ 为一个区间, 而 $ \forall x\in\varOmega $, 有 $ 1\in I(x) $, 故 $ p_{\varOmega}(x)=\inf I(x)\leqslant1 $, 也即
		\[
			\varOmega\subset\left\{ x\in E : p_{\varOmega}(x)\leqslant1 \right\}.
		\]
		还需说明 $ p_{\varOmega} $ 是半范数. 由 $ p_{\varOmega} $ 定义知 $ p_{\varOmega}\geqslant0 $, 即非负性成立. 而对 $ \alpha\ne 0 $, 有
		\[
			I(\alpha x)=\left\{ \lambda>0 : \frac{\alpha x}{\lambda}\in \varOmega \right\}=\left\{ \lambda>0 : \frac{\alpha x/\abs{\alpha}}{\lambda/\abs{\alpha}} \right\},
		\]
		因为 $ \alpha x/\abs{\alpha}\in \varOmega $ 与 $ x\in\varOmega $ 等价 (由平衡性可知), 从而
		\[
			I(\alpha x)=\left\{ \lambda>0 : \frac{\alpha x/\abs{\alpha}}{\lambda/\abs{\alpha}} \right\}=\left\{ \abs{\alpha}\lambda'>0 : \frac{x}{\lambda'}\in\varOmega \right\} = \abs{\alpha} I(x),
		\]
		两侧同取下确界, 有 $ p_{\varOmega}(\alpha x)=\abs{\alpha}p_{\varOmega}(x) $, 即齐次性成立.

		再证三角不等式. 取 $ \lambda\in I(x), \mu\in I(y) $. 则有 $ x/\lambda\in\varOmega $ 且 $ y/\mu\in\varOmega $. 因为
		\[
			\frac{x+y}{\lambda+\mu} = \frac{x}{\lambda}\cdot\frac{\lambda}{\lambda+\mu}+\frac{y}{\mu}\cdot\frac{\mu}{\lambda+\mu}.
		\]
		因为 $ \abs{\frac{\lambda}{\lambda+\mu}}\leqslant1 $, $ \abs{\frac{\mu}{\lambda+\mu}}\leqslant1 $, 且 $ \frac{\lambda}{\lambda+\mu}+\frac{\mu}{\lambda+\mu}=1 $, 由 $ \varOmega $ 的凸性知 $ \frac{x+y}{\lambda+\mu}\in\varOmega $, 即 $ \lambda+\mu\in I(x+y) $. 也即 $ p_{\varOmega}(x+y)\leqslant\lambda+\mu $, 再由 $ \lambda, \mu $ 的任意性
		\[
			p_{\varOmega}(x+y)\leqslant p_{\varOmega}(x)+p_{\varOmega}(y),
		\]
		即三角不等式成立.

		(2) 若 $ \varOmega\subset\varOmega $, 则由
		\[
			I_{\varOmega_{1}}=\left\{ \lambda>0:\frac{x}{\lambda}\in\varOmega_{1} \right\}\subset\left\{ \lambda>0:\frac{x}{\lambda}\in\varOmega_{2} \right\} = I_{\varOmega_{2}}(x)
		\]
		可知 $ p_{\varOmega_{1}}\geqslant p_{\varOmega_{2}} $. 

		(3) 因为 $ \varOmega_{3}\subset\varOmega_{1}, \varOmega_{3}\subset\varOmega_{2} $. 由~(2)~知 $ p_{\varOmega_{3}}\geqslant p_{\varOmega_{1}} $, $ p_{\varOmega_{3}}\geqslant p_{\varOmega_{2}} $, 故 $ p_{\varOmega_{3}}\geqslant\max\left\{ p_{\varOmega_{1}}, p_{\varOmega_{2}} \right\} $.\qed
	\end{Proof}

	\begin{Proposition}
		设 $ E $ 是赋范空间, $ \varOmega $ 是平衡吸收的闭凸集, 则
		\begin{enumerate}[(1)]
			\item $ \varOmega = \{ x\in E : p_{\varOmega}(x)\leqslant 1 \} $;
			\item 若 $ \varOmega $ 有界, 则 $ p_{\varOmega}(x)=0 $ 的充分必要条件是 $ x=0 $;
			\item 若 $ 0 $ 是 $ \varOmega $ 的内点, 则 $ p_{\varOmega} $ 一致连续. 
		\end{enumerate}
	\end{Proposition}
	\begin{Proof}
		(1) 由定理~\ref{thm:M凸}~, 有 $ \varOmega\subset\{ x\in E : p_{\varOmega}(x)\leqslant1 \} $. 而
		\[
			\forall n\geqslant 1\,\left( \frac{x}{1+1/n}\in\varOmega \right)
		\]
		令 $ n\to \infty $, 有 $ x\in\varOmega $, 于是 $ \varOmega = \{ x\in E : p_{\varOmega}(x)\leqslant 1 \} $.

		(2) 因为 $ \varOmega $ 有界, 则存在 $ r>0 $ 使得 $ \varOmega\subset B(0, r) $, 从而对任意 $ x $, 有 $ \frac{rx}{\norm{x}}\notin\varOmega $. 于是
		\[
			p_{\varOmega}(x)\geqslant\frac{\norm{x}}{r},
		\]
		从而 $ p_{\varOmega}(x)=0\Longleftrightarrow\norm{x}=0\Longleftrightarrow x=0 $.

		(3) $ 0 $ 是 $ \varOmega $ 的内点, 即存在 $ r>0 $ 使得 $ B(0, r)\subset\varOmega $, 则对任意 $ x $, 都有 $ \frac{rx}{2\norm{x}}\in \varOmega $, 于是
		\[
			p_{\varOmega}(x)\leqslant\frac{2\norm{x}}{r},
		\]
		从而
		\[
			\abs{p_{\varOmega}(x)-p_{\varOmega}(y)}\leqslant\max\{ p_{\varOmega}(x-y), p_{\varOmega}(y-x) \}\leqslant\frac{2\norm{x-y}}{r}
		\]
		即 $ p_{\varOmega} $ 是 Lipschitz 的, 从而一致连续. (因为 $ \varOmega $ 是平衡的, 所以实际上 $ p_{\varOmega}(x-y) = p_{\varOmega}(y-x) $.)\qed
	\end{Proof}
	\begin{Remark}
		若 $ \varOmega $ 是平衡吸收的开凸集, 则 $ \varOmega=\{ x\in E:p_{\varOmega}(x)<1 \} $. 若 $ \varOmega $ 只是吸收的凸集, 仍可定义 Minkowski 泛函 $ p_{\varOmega} $, 但此时 $ p_{\varOmega} $ 不是半范数, 但 $ p_{\varOmega} $ 仍满足
		\begin{enumerate}[(1)]
			\item $ \forall t>0\,(p_{\varOmega}(tx)=tp_{\varOmega}(x)) $;
			\item $ \forall x, y\in\varOmega\,(p_{\varOmega}(x+y)\leqslant p_{\varOmega}(x)+p_{\varOmega}(y)) $;
			\item 设 $ E $ 是赋范空间,  $ \varOmega $ 是开集, 则 $ \{ x\in E:p_{\varOmega}(x)<1 \}=\varOmega $, 即 $ \forall x\notin\varOmega, p_{\varOmega}(x)\geqslant1 $.
		\end{enumerate}
	\end{Remark}
	推广上述 Minkowski 泛函, 有
	\begin{Definition}[次线性泛函]\label{def:次线性泛函}\index{C!次线性泛函}
		设 $ E $ 是\R 上的线性空间, 若泛函 $ p:E\to \R $ 满足
		\begin{enumerate}[(1)]
			\item 齐次性: $ \forall t>0\,\forall x\in E\,(p(tx)=tp(x)) $;
			\item 次加性: $ \forall x, y\in E\,(p(x+y)\leqslant p(x)+p(y)) $.
		\end{enumerate}
		则称泛函 $ p $ 是 $ E $ 上的\textbf{次线性泛函}. 
	\end{Definition}
	例如: $ E $ 上的线性泛函是次线性泛函; Minkowski 泛函是次线性泛函; 半范数也是次线性泛函. 

\section{Hahn-Banach定理}
	\subsection{分析形式的 Hahn-Banach定理}
	\begin{Proposition}
		设 $ E $ 是线性空间,  $ \rho $ 是 $ E $ 上 (推广的) 线性泛函,  $ \rho : E\to \K $, 记 $ F= \ker \rho\subset E $ 则 $ E/ F $ 是线性空间, 且 $ \codim F = \dim E/F=1 $.
	\end{Proposition}
	\begin{Proof}
		若 $ x_{1}+F, x_{2}+F $ 在 $ E/F $ 中线性无关, 则 $ x_{1}+F\ne F, x_{2}+F\ne F $, 即 $ \rho(x_{1})\ne 0, \rho(x_{2})\ne 0 $, 由 $ \rho $ 的线性性可知
		\[
			\rho(x_{2}\rho(x_{1})-x_{1}\rho(x_{2}))=\rho(x_{2})\rho(x_{1})-\rho(x_{1})\rho(x_{2})=0
		\]
		即 $ x_{2}\rho(x_{1})-x_{1}\rho(x_{2})+F=F $, 也即 $ \rho(x_{1})(x_{2}+F)-\rho(x_{2})(x_{1}+F)=F $. 矛盾.\qed
	\end{Proof}
	上一命题说明了对一般的线性空间 $ E $, 余维数为 1 可用
	\[
		\exists x\in E\sm F \,(E=F+\K x)
	\]
	来刻画.

	\begin{Lemma}
		设 $ E $ 是线性空间,  $ F $ 是 $ E $ 的线性子空间且 $ \codim F=1 $, 并设 $ p:E\to \R $ 是次线性泛函,  $ f:F\to \R $ 是线性泛函， 在 $ F $ 上成立 $ f\leqslant p $， 则存在线性泛函 $ \tilde{f}:E\to\R $ 使得
		\[
			(\tilde{f}|_{F}=f)\land(\forall x\in E\,(\tilde{f}(x)\leqslant p(x))).
		\]
	\end{Lemma}
	\begin{Proof}
		由 $ \codim F =1 $ 可知 $ \exists x_{0}\in E\sm F $ 使得 $ E = \R x_{0}+F $. 设 $ \tilde{f}:E\to\R $ 是 $ f $ 的线性延拓, 即 $ \tilde{f} $ 线性且 $ \tilde{f}|_{F}=f $. 则
		\[
			\forall\lambda\in\R\,\forall x\in F\,(\tilde{f}(\lambda x_{0}+x)=\lambda\tilde{f}(x_{0})+f(x)),
		\] 
		即 $ \tilde{f} $ 由其在 $ x_{0} $ 处的取值唯一确定, 不妨设 $ \tilde{f}(x_{0})=a $, 则
		\[
			\begin{aligned}
				\forall x'\in E\,(\tilde{f}(x')\leqslant p(x')) & \Longleftrightarrow \forall\lambda\in \R\,\forall x\in F\,(\tilde{f}(\lambda x_{0}+x)\leqslant p(\lambda x_{0}+x)) \\
				& \Longleftrightarrow \forall\lambda\in \R\,\forall x\in F\,(\lambda a+f(x)\leqslant p(\lambda x_{0}+x)).
			\end{aligned}
		\]
		从而上式等价于 $ \forall\lambda\in\R $, $ \forall x\in F $.
		\[
			\begin{cases}
				a\leqslant \frac{1}{\lambda}p(\lambda x_{0}+x)-\frac{1}{\lambda}f(x) & ,\lambda\geqslant0\\
				a\geqslant \frac{1}{\lambda}p(\lambda x_{0}+x)-\frac{1}{\lambda}f(x) & ,\lambda<0
			\end{cases}\Longleftrightarrow
			\begin{cases}
				a\leqslant p\left(x_{0}+\frac{x}{\lambda}\right)-f\left( \frac{x}{\lambda} \right) & ,\lambda\geqslant 0\\
				a\geqslant-p\left( -x_{0}-\frac{x}{\lambda} \right) + f\left( -\frac{x}{\lambda} \right) & ,\lambda>0
			\end{cases}
		\]
		注意到上式对任意的 $ x\in F $ 成立. 故可将 $ -x/\lambda $ 替换为 $ x $, 将 $ x/\lambda $ 替换为 $ y $. 则上式化为
		\[
			\forall x, y\in F\,(f(x)-p(-x_{0}+x)\leqslant a\leqslant p(x_{0}+y)-f(y)),
		\]
		故 $ a $ 的存在性等价于
		\[
			f(x)-p(x_{0}+x)\leqslant p(x_{0}+y)-f(y),
		\]
		也即
		\[
			f(x)+f(y)\leqslant p(x_{0}+y)+p(-x_{0}+x),
		\]
		而注意到
		\[
			f(x)+f(y)=f(x+y)\leqslant p(x+y)\leqslant p(x-x_{0})+p(x_{0}+y),
		\]
		故存在 $ a $ 满足 $ a\in\Big[\sup\limits_{x\in F}(f(x)-p(-x_{0}+x)), \inf\limits_{y\in F}(p(x_{0}+y)-f(y))\Big] $\qed
	\end{Proof}
	本节称上一定理为延拓定理。 则由延拓定理, $ \codim F<\infty $ 时重复使用这一定理即可. $ \codim F=\aleph_{0} $ 时由归纳法也有相应命题成立, 而对 $ \codim F > \aleph_{0} $ 的情形则不可避免地用到 Zorn 引理.

	\begin{Theorem}[Hahn-Banach 定理: 实情形]
		设 $ E $ 是实线性空间, $ F $ 是 $ E $ 的线性子空间, $ p: E\to\R $ 是次线性泛函, $ f : F\to\R $ 为线性泛函, 且在 $ F $ 上成立 $ f\leqslant p $, 则存在 $ f $ 的线性延拓 $ \tilde{f}:E\to\R $ 使得
		\[
			(\tilde{f}|_{F}=f)\land(\forall x\in E\,(\tilde{f}(x)\leqslant p(x))).
		\]
	\end{Theorem}
	\begin{Proof}
		设 $ \CF $ 是二元组 $ (G, g) $ 的全体, 其中 $ (G, g) $ 满足
		\begin{enumerate}[(1)]
			\item $ G $ 是 $ E $ 的线性子空间且 $ F\subset G $;
			\item $ g:G\to \R $ 是线性泛函, $ g|_{F}=f $ 且在 $ G $ 上成立 $ g\leqslant p $.
		\end{enumerate}
		并定义 $ \CF $ 上的偏序:
		\[
			(G, g)\leqslant (H, h)\Longleftrightarrow G\subset H \land h|_{G}=g.
		\]
		则 $ (\CF, \leqslant) $ 为一个偏序集. 任取 $ \CG $ 为 $ \CF $ 的全序子集, 并令 $ H = \bigcup_{(G, g)\in\CG}G $, 定义 $ h:H\to\R $ 使得
		\[
			\forall (G, g)\in\CG\,\forall x\in G\,(h(x)=g(x)).
		\]
		则 $ (H, h) $ 是 $ \CG $ 的上界 (此因对 $ \forall (G, g)\in\CG $ 都有 $ h|_{G}=g $ 且 $ h\leqslant p $). 由 Zorn 引理, $ \CF $ 有极大元 $ (M, m) $.

		往证 $ M=E $. 否则 $ \exists x_{0}\in E\sm M $, 令 $ G = \Span\{ M, x_{0} \}=M+\R x_{0} $, 此时 $ \codim_{G}M=1 $, 由延拓定理可知存在 $ g:G\to\R $, 使得
		\[
			(g|_{M} = m) \land (g\leqslant p).
		\]
		即 $ (M, m)\leqslant(G, g) $. 这与 $ (M, m) $ 是极大元矛盾, 故 $ M = E $, 此时取 $ \tilde{f}=m $ 即可.\qed
	\end{Proof}
	\begin{Theorem}[Hahn-Banach]
		设 $ E $ 是 \K 上的线性空间,  $ F\subset E $ 是线性子空间, 并设 $ p:E\to\R $ 是半范数,  $ f:F\to\K $ 是线性泛函, 且在 $ F $ 上成立 $ \abs{f}\leqslant p $. 则存在线性泛函 $ \tilde{f}:E\to\R $ 使得
		\[
			(\tilde{f}|_{F}=f)\land(\forall x\in E\,(\abs{f(x)}\leqslant p(x))).
		\]
	\end{Theorem}
	\begin{Proof}
		当 $ \K = \R $ 时, 因为 $ F $ 上成立 $ f\leqslant p $, 由 Hahn-Banach 定理的实情形可知存在 $ \tilde{f}:E\to \R $ 使得 $ \tilde{f}|_{F}=f $, 且 $ \forall x\in E\,(\tilde{f}(x)\leqslant p(x)) $, 从而
		\[
			\tilde{f}(-x)\leqslant p(-x) = p(x).
		\]
		故 $ \forall x\in E\,(\abs{\tilde{f}(x)}\leqslant p(x)) $.

		当 $ \K=\C $ 时, 因为 $ f=\Re f+\imag \Im f $, 令 $ \varphi = \Re f $. 则 $ \varphi:E\to\R $ 是实线性泛函. 注意到
		\[
			f(\imag x)= \imag \Re f(x) - \Im f(x),
		\]
		从而 $ \varphi(\imag x)=-\Im f(x) $. 于是可以写成
		\[
			f(x)=\varphi(x)-\imag \varphi(\imag x).
		\]
		由 $ \abs{f}\leqslant p $ 知 $ \tilde{f}(x)=\tilde{\varphi}(x)-\imag\tilde{\varphi}(\imag x) $, 则 $ \tilde{f} $ 是复线性泛函, 则 $ \forall x\in F $, 有
		\[
			\tilde{f}(x)=\tilde{\varphi}(x)-\imag\tilde{\varphi}(\imag x)= \varphi(x)-\imag\varphi(\imag x)=f(x),
		\]
		即 $ \tilde{f}|_{F}=f $.

		而 $ \forall x\in E $, 令 $ \lambda=\sgn\tilde{f}(x) $, 有 $ \abs{\lambda}=1 $, 从而
		\[
			|\tilde{f}(x)|=\lambda\tilde{f}(x)=\tilde{f}(\lambda x)= \tilde{\varphi}(\lambda x)-\imag \tilde{\varphi}(\imag\lambda x)=\tilde{\varphi}(\lambda x)\leqslant p(\lambda x)=p(x).
		\]
		\qed
	\end{Proof}
	下面是 Hahn-Banach 定理的推论:
	\begin{Corollary}\label{cor:保范延拓}
		设 $ E $ 是 \K 上的赋范空间,  $ F $ 是 $ E $ 的线性子空间, $ f:F\to\K $ 是连续线性泛函, 则存在 $ f $ 的连续线性延拓 $ \tilde{f}:E\to\K $ 使得
		\[
			(\tilde{f}|_{F}=f)\land (\|\tilde{f}\|=\norm{f}),
		\]
		称 $ \tilde{f} $ 为 $ f $ 的\textbf{保范延拓}.
	\end{Corollary}
	\begin{Proof}
		因为 $ \forall x\in F $ 成立 $ \abs{f(x)}\leqslant\norm{f}\norm{x} $. 由 Hahn-Banach 定理可知存在 $ \tilde{f} $ 使得 $ \tilde{f}|_{F}=f $, 且
		\[
			\forall x\in E\,(|\tilde{f}(x)|\leqslant p(x)=\norm{f}\norm{x}),
		\]
		即 $ \|\tilde{f}\|\leqslant \norm{f} $, 由 $ \tilde{f}|_{F}=f $ 可知 $ \|\tilde{f}\|=\norm{f} $.\qed
	\end{Proof}
	\begin{Corollary}\label{cor:HB2}
		设 $ E $ 是赋范空间, $ x_{0}\in E $ 且 $ x_{0}\ne 0 $, 则 $ \exists f\in \Star{E} $ 使得 $ f(x_{0})=\norm{x_{0}} $ 且 $ \norm{f}=1 $.
	\end{Corollary}
	\begin{Proof}
		令 $ F=\K x_{0} $, 则定义 $ F $ 上的线性泛函 $ f_{0} $ 满足: $ f_{0}(\lambda x_{0})=\lambda\norm{x_{0}} $. 由推论~\ref{cor:保范延拓}~可知存在 $ f\in\Star{E} $ 使得 $ f|_{F}=f_{0} $ 且 $ \norm{f}=\norm{f_{0}}=1 $, 即 $ f(x_{0})=\norm{x_{0}} $.\qed
	\end{Proof}
	\begin{Corollary}\label{cor:HB3}
		设 $ E $ 是赋范空间, 则任取 $ x\in E $, 有
		\[
			\norm{x}=\sup\{ \abs{f(x)}:f\in\Star{E}, \norm{f}\leqslant1 \},
		\]
		且上确界可达.
	\end{Corollary}
	\begin{Proof}
		记等式右侧为 $ \alpha $, 则 $ \forall f\in \Star{E} $, 由 $ \abs{f(x)}\leqslant\norm{f}\norm{x} $ 可知 $ \alpha \leqslant\norm{x} $. 而由推论~\ref{cor:HB2}~可知对任意 $ x\in E, x\ne 0 $, 存在 $ f_{0}\in \Star{E} $, 使得 $ f_{0}(x)=\norm{x} $ 且 $ \norm{f_{0}}=1 $, 故 $ \alpha =\norm{x} $.\qed
	\end{Proof}
	推论~\ref{cor:HB3}~说明 $ x\in E $ 的范数可被 $ \Star{E} $ 中的元素表达, 考虑双线性泛函
	\[
		B:E\times\Star{E}\to\K\quad(x, f)\mapsto f(x).
	\]
	则 $ \forall(x, f)\in E\times\Star{E} $, 都有 $ \abs{B(x, f)}\leqslant\norm{x}\norm{f} $, 由推论~\ref{cor:双线性映射连续性}~知 $ B $ 连续. 从而对任意给定的 $ x\in E $, 都有 $ B(x, \cdot):\Star{E}\to\K $ 连续, 也即
	\[
		B(x,\cdot)\in\Star{(\Star{E})}=: E^{**}\quad x\mapsto B(x, \cdot)
	\]
	是等距同构, 此时记 $ E\hookrightarrow E^{**} $, 称 $ E $ 可\textbf{等距嵌入} $ E^{**} $.
	
	之所以使用嵌入是因为$ E $未必完备, 当$ E $不完备时, 若将$ \hat{x}=B(x,\cdot) $与$ x $等同, 则有$ E\subset E^{**} $.
	
	\begin{Corollary}\label{cor:HB4}
	设$ E $是赋范空间, $ F\subset E $是闭线性子空间, 且$ F\ne E $. 取定$ x\in E\sm F $, 则存在$ f\in\Star{E} $使得$ \norm{f}=1 $, $ f\rvert_F $=0且$ f(x)=d(x,F) $.
	\end{Corollary}
	\begin{Proof}
	考虑空间$ \K x+F $, 定义其上的线性泛函
	\[
	\varphi : \K x+F\to\K,\qquad tx+y\mapsto td(x,F),
	\]
	显然$ t=0 $时有$ \varphi(y)=0 $, 而$ t\ne 0 $时注意到
	\[
	\abs{\varphi(tx+y)}=\abs{td(x,F)}=\inf_{z\in F}\abs{t}\norm{x-z}=\inf_{z\in F}\norm{tx-tz}=\inf_{z\in F}\norm{tx+z}\leqslant\norm{tx+y},
	\]
	即$ \abs{\varphi(tx+y)}\leqslant\norm{tx+y} $, 从而$ \norm{\varphi}\leqslant 1 $于$ \K x+F $. 再由距离的定义可知
	\[
	\forall n\geqslant 1\,\exists y_n\in F\,\left(d(x,F)\leqslant\norm{x-y_n}\leqslant d(x,F)+\frac{1}{n}\right)
	\]
	从而
	\[
	\norm{\varphi}\geqslant\frac{\abs{\varphi(x-y_n)}}{\norm{x-y_n}}=\frac{d(x,F)}{d(x,F)+1/n}.
	\]
	令$ n\to\infty $后可知$ \norm{\varphi}\geqslant 1 $, 于是$ \norm{\varphi}=1 $. 由推论~\ref{cor:保范延拓}~可知存在$ f\in\Star{E} $使得$ f\rvert_{\K x+F}=\varphi $, 且$ \norm{f}=\norm{\varphi}=1 $. 而$ f\rvert_F=\varphi\rvert_F=0 $, 且有$ f(x)=d(x,F) $.\qed
	\end{Proof}
	
	\begin{Corollary}
	设$ E $是赋范空间, $ F\subset E $, $ x_0\in E $, 则$ x_0\in\bar{F} $当且仅当对任意满足$ f\rvert_F=0 $的$ f\in\Star{E} $, 都有$ f(x_0)=0 $成立.
	\end{Corollary}
	\begin{Proof}
	\textsl{必要性.} 若$ x_0\in \bar{F} $, 由$ f\rvert_F=0 $与$ f $的连续性可知$ f\rvert_{\bar{F}}=0 $, 于是$ f(x_0)=0 $.
	
	\textsl{充分性.} 若$ x_0\notin \bar{F} $, 由推论~\ref{cor:HB4}~可知存在$ g\in\Star{E} $使得$ g\rvert_{\bar{F}}=0 $, 且$ g(x_0)=d(x_0,\bar{F})>0 $, 这与$ g(x_0)=0 $是矛盾的. 故$ x_0\in\bar{F} $.\qed
	\end{Proof}
	
	\subsection{几何形式的 Hahn-Banach 定理(凸集隔离定理)}
	
	\begin{Theorem}[Hahn-Banach/凸集隔离定理]\label{thm:凸集隔离定理}
	设$ E $是$ \K $上的线性空间, $ A, B $都是非空凸子集且$ A\cap B=\varnothing $, 若$ A $是开集, 则$ \exists f\in\Star{E} $, $ \exists\alpha\in \R $使得
	\[
	\forall a\in A\,\forall b\in B\,((\Re f)(a)<\alpha\leqslant(\Re f)(b)).
	\]
	\end{Theorem}
	\begin{Proof}
	先考虑$ \K=\R $的情形, 设$ a_0\in A $且$ b_0\in B $, 令$ C=A-B-(a_0-b_0)=A-B+x_0 $, 其中$ x_0=b_0-a_0 $, 那么
	\begin{enumerate}[(1)]
	\item $ C $是凸集, 此因$ A, B $都是凸集.
	\item $ C $是开集, 此因$ C=\bigcup_{y\in B}(A-y+x_0) $而$ A-y+x_0 $总是开集.
	\item $ 0\in C $, 此因$ a_0-b_0+x_0=0 $.
	\item $ x_0\notin C $, 此因$ A\cap B=\varnothing $.
	\end{enumerate}
	从而$ C $是一个吸收凸集, 且$ C $是开集, 于是$ C $上的Minkowski泛函$ p_C $是一个次线性泛函. 且$ C=\{ x : p_C(x)<1 \} $. 由0是$ C $的内点可知存在$ r>0 $使得$ p_C(x)\leqslant\frac{2\norm{x}}{r} $, 从而$ p_C $一致连续.
	
	取$ f_0 $是$ \K x_0 $上的线性泛函, 且$ f_0(x_0)=p_C(x_0)\geqslant 1 $, 由Hahn-Banach定理可知存在$ f\in\Star{E} $使得$ f(x_0)=p_C(x_0) $且$ f(x)\leqslant p_C(x) $, 则$ \forall x\in E $, 都有
	\[
	-f(x)=f(-x)\leqslant p_C(-x)\leqslant\frac{2\norm{x}}{r},
	\]
	即$ -f(x)\leqslant\frac{2\norm{x}}{r} $, 从而$ \abs{f(x)}\leqslant\frac{2\norm{x}}{r} $. 于是$ \norm{f}<\infty $, 这意味着$ f $连续. 而由$ a-b+x_0 $可知
	\[
	f(a-b+x_0)=f(a)-f(b)+f(x_0)=f(a)-f(b)+p_C(x_0)\leqslant p_C(a-b+x_0)<1,
	\]
	从而
	\[
	f(a)\leqslant f(b)+1-p_C(x_0)\leqslant f(b),
	\]
	即$ \forall a\in A\,\forall b\in B\,(f(a)\leqslant f(b)) $.
	
	还需说明$ f(A) $是一个开集. 因为$ A $是凸集, 故$ f(A) $是区间, 取$ x\in A $, 由$ A $是开集可知存在$ \eta>0 $使得$ \abs{t}<\eta $时, 有$ x+tx_0\in A $, 则
	\[
	f(x+tx_0)=f(x)+tf(x_0)\in f(A),
	\]
	从而
	\[
	\varnothing\ne(f(x)-\eta f(x_0),f(x)+\eta f(x_0))\subset f(A),
	\]
	即$ f(A) $是开区间, 记$ f(A)=(\beta,\alpha) $后有$ \forall a\in A\,\forall b\in B\,(f(a)<\alpha\leqslant f(b)) $.
	
	当$ \K=\C $时, 将$ E $看作实线性空间, 则由$ \K=\R $的讨论可知存在$ \varphi : E\to \R $与常数$ \alpha\in\R $使得$ \forall a\in A\,\forall b\in B\,(\varphi(a)<\alpha\leqslant\varphi(b)) $. 取
	\[
	f(x)=\varphi(x)-\imag\varphi(\imag x)
	\]
	后可知$ f\in\Star{E} $满足条件.\qed
	\end{Proof}
	
	\begin{Theorem}[Hahn-Banach严格隔离定理]
	设$ E $是赋范空间, $ A, B $是非空凸子集且$ A\cap B=\varnothing $. 若$ A $是紧集且$ B $是闭集, 则存在$ f\in\Star{E} $与常数$ \alpha,\beta\in\R $使得
	\[
	\sup_{a\in A}(\Re f)(a)<\alpha<\beta<\inf_{b\in B}(\Re f)(b).
	\]
	\end{Theorem}
	\begin{Proof}
	因为$ A\cap B=\varnothing,\ \forall x\in A $都有$ x\in B^c $. 则存在$ r_x>0 $使得$ x+B(0,r_x)\subset B^c $. 于是$ A\subset\bigcup_{x\in A}(x+B(0,r_x)) $. 由$ A $的紧性可知存在有限个$ x_1,x_2,\dots,x_n\in A $使得
	\[
	A\subset\bigcup_{k=1}^n\left(x_k+B\left(0,\frac{r_{x_k}}{2}\right)\right).
	\]
	令$ r=\min\{ r_{x_1}/2,r_{x_2}/2,\dots,r_{x_n}/2 \} $, 并令$ \tilde{A}=A+B(0,r) $, 则$ \tilde{A} $是凸集且是开集, 往证$ \tilde{A}\subset B^c $. 取$ \tilde{x}\in\tilde{A} $, $ \tilde{x}=x+y $, 其中$ x\in A,\ y\in B(0,r) $, 则对$ x $, 存在$ x_k $使得$ x\in B(x_k,r_{x_k}/2)=x_k+B(0,r_{x_k}/2) $. 从而
	\[
	\tilde{x}\in x_k+B\left(0,\frac{r_{x_k}}{2}\right)+B(0,r)\subset x_k+B\left(0,\frac{r_{x_k}}{2}+r\right)\subset x_k+B(0,r_{x_k})\subset B^c,
	\]
	从而$ \tilde{A}\subset B^c $. 由凸集隔离定理可知$ \exists f\in\Star{E} $, $ \exists r>0 $有
	\[
	\forall a\in\tilde{A}\,\forall b\in B\,((\Re f)(a)<r\leqslant(\Re f)(b))
	\]
	注意到$ A $紧, 故$ f(A) $紧, 设$ f(A)=[r_1,r_2] $, 则$ r_2<r $. 故存在$ \alpha,\beta\in\R $使得$ r_2<\alpha<\beta<r $, 此时
	\[
	\forall a\in A\,\forall b\in B\,((\Re f)(a)<\alpha<\beta<(\Re f)(b))
	\]
	命题成立.\qed
	\end{Proof}
	
	\begin{Definition}[超平面]\index{C!超平面}
	设$ E $是是线性空间, $ f $是$ E $上的线性泛函, 则$ \forall\alpha\in\R $, 称
	\[
	\{ x\in E : f(x)=\alpha \}
	\]
	是$ E $中的\textbf{超平面.}
	\end{Definition}
	\begin{Remark}
	凸集隔离定理说明两个不相交的凸集可被一个超平面分离:
	\[
	E=\{ x : (\Re f)(x)<\alpha \}\amalg\{ x : (\Re f)(x)\geqslant\alpha \}.
	\]
	每一部分称为一个半空间. 则若$ A\cap B=\varnothing $, 则可使得$ A, B $分别位于两个半空间中.
	\end{Remark}
	
	将几何概念明确之后, 我们可以不使用分析形式的Hahn-Banach定理来证明定理~\ref{thm:凸集隔离定理}~.
	
	\textbf{另证}\ \ 不妨设$ E $是实线性空间, 考虑$ A-B $, 这是一个开凸集, 且由$ A\cap B=\varnothing $可知$ 0\notin A-B $.
	
	\textbf{(Step 1)} 构造最大凸集$ C $.
	
	令$ \mathcal{C} $是以下开凸集全体: $ 0\notin C $, $ A-B\subset C $. 并在$ \mathcal C $上以包含关系作为偏序关系, 则$ (\mathcal C,\leqslant) $是一个偏序集. 取$ \mathcal C_0 $是$ \mathcal C $的全序子集, 作$ \tilde{C}=\bigcup\mathcal C_0 $, 则$ \tilde{C} $是$ \mathcal C_0 $的上界. 由Zorn引理可知$ \mathcal C $有极大元$ C $.
	
	再考虑集合$ D=\{\lambda x : x\in C,\lambda>0\} $. 由$ C $是开凸集可知$ D $也是开凸集, 且$ C\subset D $, $ 0\notin D $. 于是$ A-B\subset D $, 这说明$ D\in\mathcal C $. 由$ C $的极大性可知$ C=D $. 且由这一形式可知$ C\cap -C=\varnothing $, 于是
	\[
	\forall x,y\in C\,\forall\lambda,\mu>0\,(\lambda x+\mu y\in C)
	\]
	
	\textbf{(Step 2)} 证明$ E\sm(C\cup-C) $是线性空间.
	
	为此, 只需证明$ \forall x,y\notin C\,\forall\lambda,\mu>0\,(\lambda x+\mu y\notin C) $即可. 用反证法, 若$ \lambda x+\mu y\in C $, 则$ \forall r>0 $, 有
	\[
	r((\lambda x+\mu y)+(\lambda x-\mu y))=2r\lambda x\notin C,
	\]
	从而只能$ r(\lambda x-\mu y)\notin C $. 考虑
	\[
	C_1=\{ z-r(\lambda x-\mu y) : z\in C,\ r\geqslant 0 \},
	\]
	这是一个开凸集, 且$ 0\notin C_1 $(否则$ r=0 $时只能$ z=0 $, 矛盾). 特别地, 取$ r=0 $可知$ C\subset C_1 $, 从而由$ C $的极大性可知$ C=C_1 $. 取$ r=1 $, $ z=\lambda x+\mu y $后可知
	\[
	\lambda x+\mu y-(\lambda x-\mu y)=2\mu y\in C,
	\]
	这说明$ y\in C $, 矛盾. 从而只能$ \lambda x+\mu y\notin C $.
	
	再任取$ x', y'\in E\sm(C\cup-C) $, 往证$ \forall\lambda,\mu\in\R\,(\lambda x'+\mu y'\in E\sm(C\cup -C)) $. 当$ \lambda,\mu $至少一个为零时命题显然成立, 故只需考虑$ \lambda,\mu $均不为零的情形. 由$ x',y'\in E\sm(C\cup-C) $可知$ x'\notin C,\ x'\notin -C,\ y'\notin C,\ y\notin -C $. 从而对$ \lambda,\mu>0 $, 注意到
	\[
	\begin{aligned}
	\lambda x'+\mu y'\notin C,&\qquad (-\lambda)x'+(-\mu)y'=\lambda(-x')+\mu(-y')\notin C,\\
	(-\lambda)x'+\mu y'=\lambda(-x')+\mu y'\notin C,&\qquad \lambda x'+(-\mu)y'=\lambda x'+\mu(-y')\notin C,
	\end{aligned}
	\]
	从而命题成立, 于是$ E\sm(C\cup-C) $是一个线性空间.
	
	\textbf{(Step 3)} 构造超平面.
	
	记$ E_0=E\sm(C\cup-C) $, 往证$ E_0 $余1维. 设$ \tilde{x},\tilde{y}\in E\sm E_0 $, 则$ \tilde{x},\tilde{y}\ne 0 $. 往证$ \exists \lambda,\mu\ne 0 $ 使得 $ \lambda\tilde{x}+\mu\tilde{y}\in E_0 $. 不妨$ \tilde{x}\in C $而$ \tilde{y}\in -C $. 令
	\[
	S_0=\{ s\in[0,1] : \tilde{x}+s(\tilde{y}-\tilde{x})\in C \},\qquad S_1=\{ s\in[0,1] : \tilde{x}+s(\tilde{y}-\tilde{x})\in -C \}
	\]
	由$ C $是开集可知$ S_0, S_1 $都是开集. 再由$ C\cap -C=\varnothing $可知$ S_0\cap S_1=\varnothing $, 且$ S_0\cup S_1\ne[0,1] $, 故存在$ s\in[0,1] $使得
	\[
	(1-s)\tilde{x}+s\tilde{y}\in E_0.
	\]
	从而$ E_0 $是余1维的.
	
	由$ C\cup -C $是开集可知$ E_0=E\sm(C\cup-C) $是闭集. 于是可以定义$ E $上的线性泛函$ f $使得$ f(\lambda x_0+x)=\lambda d(x_0,E_0) $,(这里$ E_0 $的闭性保证了距离well-defined), 其中$ x_0\in E\sm E_0 $. 从而$ \lambda\ne 0 $时对任意$ x\in E_0 $, 都有
	\[
	\abs{f(\lambda x_0+x)}=\abs{\lambda}d(x_0,E_0)\leqslant\abs{\lambda}\cdot\norm{x_0+\frac{r}{\lambda}}=\norm{\lambda x_0+x}.
	\]
	从而$ f\in\Star{E} $且$ \norm{f}\leqslant 1 $. 故$ 0\notin f(C)=f(A-B) $是区间, 且一定形如$ (a,\infty) $(当$ a>0 $)或$ (-\infty,a) $(当$ a<0 $). 再由$ C=D $的性质可知$ f(C) $必形如$ (0,\infty) $或$ (-\infty,0) $. 不妨$ f(C)=(-\infty,0) $, 即$ f(A)-f(B)<0 $, 也即$ f(A)<f(B) $, 即
	\[
	\forall a\in A\,\forall b\in B\,(f(a)<f(b)),
	\]
	取$ \alpha=\sup\limits_{a\in A}f(a) $, 则
	\[
	\forall a\in A\,\forall b\in B\,(f(a)<\alpha\leqslant f(b))
	\]
	即超平面$ \{ x : f(x)=\alpha \} $分离$ A, B $.
	
	复线性空间的情形与原证明方法类似.\qed
	
	注意到另证本质上只用到了$ f $的连续性, 于是上面的证明可以毫无困难地推广到$ E $是局部凸的Hausdorff空间的情形.
	
	\begin{Corollary}\label{cor:HB严格1}
	设$ E $是赋范空间, $ B $是平衡的闭凸集, $ x_0\in B^c $. 则存在$ f\in\Star{E} $使得$ f(x_0)>1 $且$ \sup\limits_{x\in B}\abs{f(x)}\leqslant 1 $.
	\end{Corollary}
	\begin{Proof}
	对$ \{ x_0 \} $与$ B $使用Hahn-Banach严格隔离定理, 则存在$ \tilde{f}\in\Star{E} $与$ \alpha,\beta\in\R $使得$ \forall b\in B $都有
	\[
	(\Re\tilde{f})(b)<\alpha<\beta<(\Re\tilde{f})(x_0)
	\]
	注意到$ B $是平衡集, 于是$ 0\in B $, 从而$ x_0\ne 0 $, 且$ 0<\alpha<\beta<(\Re\tilde{f})(x_0) $.
	
	取$ f=\frac{1}{\alpha}\sgn\tilde{f}(x_0)\tilde{f} $, 则有
	\[
	f(x_0)=\frac{\Babs{\tilde f(x_0)}}{\alpha}>\frac{(\Re \tilde{f})(x_0)}{\alpha}>1,
	\]
	再由$ B $是平衡集可知$ \sup\limits_{b\in B}(\Re f)(b)=\sup\limits_{b\in B}\abs{f(b)} $, 且$ f(b)\ne 0 $. 取$ \lambda=\sgn f(b) $后可知$ \abs{\lambda}=1 $, 且由$ f(b)=\lambda\abs{f(b)} $知$ \abs{f(b)}=\bar{\lambda}f(b) $. 从而$ (\Re f)(\bar{\lambda}b)=\abs{f(b)} $, 则
	\[
	\sup_{b\in B}\abs{f(b)}=\sup_{b\in B}\frac{\Babs{\tilde{f}(b)}}{\alpha}=\frac{1}{\alpha}\sup_{b\in B}(\Re\tilde{f})(b)<1.
	\]
	\qed
	\end{Proof}
	
	\begin{Corollary}
	设$ E $是赋范空间, $ B $是闭线性子空间, $ x_0\notin B $. 则存在$ f\in\Star{E} $使得$ f(x_0)=1 $且$ f\rvert_B=0 $.
	\end{Corollary}
	\begin{Proof}
	在推论~\ref{cor:HB严格1}~中取$ f=\sgn\tilde{f}(x_0)\tilde{f} $类似可证.\qed
	\end{Proof}
	
	\begin{Corollary}\label{cor:E*可分点}
	设$ E $是赋范空间, 则$ \Star{E} $可分点.
	\end{Corollary}
	\begin{Proof}
	当$ x\ne y $时, 对$ \{x\},\ \{y\} $使用Hahn-Banach严格隔离定理, 存在$ f\in\Star{E} $与$ \alpha,\beta\in\R $使得
	\[
	(\Re f)(x)<\alpha<\beta<(\Re f)(y)
	\]
	故$ f(x)\ne f(y) $, 即$ \Star{E} $可分点.\qed
	\end{Proof}
	
	\begin{Corollary}[Mazur]
	设$ E $是线性空间, $ \tau_1,\ \tau_2 $是$ E $上的Hausdorff拓扑, 且$ (E,\tau_1) $与$ (E,\tau_2) $都是局部凸空间, 若$ \forall f\in\Star{E} $, 都有$ f $是$ \tau_1 $-连续的当且仅当$ f $是$ \tau_2 $-连续, 即
	\[
	(E,\tau_1)^*=(E,\tau_2)^*
	\]
	则对$ E $中任意凸集$ A $. 它是$ \tau_1 $--闭的当且仅当它是$ \tau_2 $--闭的.
	\end{Corollary}
	\begin{Proof}
	用反证法. 设$ A\subset E $是凸集且$ \tau_1 $--闭, 但$ A $不$ \tau_2 $--闭. 则存在$ x_0\in(\bar{A})^{\tau_2} $但$ x_0\notin A $, 由Hahn-Banach严格隔离定理, 存在$ f\in(E,\tau_1)^* $, $ \exists\alpha\in\R $使
	\[
	\sup_{a\in A}(\Re f)(a)<\alpha<(\Re f)(x_0)
	\]
	而由题设, $ f $也是$ \tau_2 $-连续的. 但$ x_0\in(\bar{A})^{\tau_2} $. 故由$ \sup\limits_{a\in A}(\Re f)(a)<\alpha $可知$ (\Re f)(x_0)\leqslant\alpha $. 矛盾.\qed
	\end{Proof}
	\begin{Remark}
	若$ A $不是凸集, 则结论未必成立. 另外, 凸的$ \tau_1 $-开集未必是$ \tau_2 $-开集.
	\end{Remark}
	
\section{弱拓扑与弱*拓扑}	
	\subsection{弱收敛与弱*收敛}
	
	\begin{Definition}[弱收敛]\index{R!弱收敛}\index{R!弱极限}
	设$ E $是赋范空间, $ (x_n)_{n\geqslant 1} $是$ E $中序列. 若存在$ x\in E $使得$ \forall f\in\Star{E} $都有
	\[
	\lim_{n\to\infty}f(x_n)=f(x),
	\]
	则称$ (x_n)_{n\geqslant 1} $\textbf{弱收敛}到$ x $, 记作$ x_n\weakto x $, 并称$ x $是$ (x_n)_{n\geqslant 1} $的\textbf{弱极限}.
	\end{Definition}
	
	\begin{Remark}
		下面是一些关于弱收敛的注记:
		\begin{enumerate}[(1)]
			\item 由共鸣定理可知若$ x_n\weakto x $, 则有$ \sup\limits_{n\geqslant 1}\norm{x_n}<\infty $.
			\item 称原本定义的(依度量收敛)的极限为强极限, 若$ x_n\to x $, 则$ x_n\weakto x $.
			\item 若$ E $是Hilbert空间, 则$ x_n\weakto x $当且仅当$ \forall y\in E\,(\lrangle{x_n,y}\to\lrangle{x,y}) $. (必要性显然而充分性由Riesz表示定理立即可得)
			\item 若 $ E $ 是有限维赋范空间, 则弱收敛与强收敛等价.
			\item 若 $ (x_{n})_{n\geqslant1} $ 弱收敛, 则其弱极限唯一.
		\end{enumerate}
	\end{Remark}

	\begin{Proof}
		(4) 只需证明弱收敛必强收敛即可, 设 $ \seq{e} $ 是 $ E $ 的一组基, $ (x_{m})_{m\geqslant1} $ 是 $ E $ 中序列, $ x_{m}=\sum\limits_{j=1}^{n}\lambda_{m, j}e_{j} $, 且 $ x_{m}\weakto x, x=\sum\limits_{k=1}^{n}\lambda_{k}e^{k} $, 取 $ f_{k}\in\Star{E}, k = 1, 2, \dots, n $, 使得 $ f_{k}(e_{j})=\delta_{k, j} $, 则因 $ x_{m}\weakto x $ 有
		\[
			\lim_{m\to\infty}f_{k}(x_{m})=\lim_{n\to\infty}\lambda_{m, k}=f_{k}(x)=\lambda_{k},
		\]
		即 $ \forall k=1, 2, \dots, n $, 有 $ \lambda_{m, k}\to \lambda_{k} $. 从而
		\[
			\norm{x_{m}-x}=\norm{\sum_{k=1}^{m}(\lambda_{m, k}-\lambda_{k})e_{k}}\leqslant\sum_{k=1}^{m}(\lambda_{m, k}-\lambda_{k})\norm{e_{k}}\to 0, \quad m\to \infty.
		\]
		故 $ x_{m}\to x $.

		(5) 设 $ x_{n}\weakto x, x_{n}\weakto y $, 且 $ x\ne y $, 由 Hahn-Banach 严格隔离定理 (或推论~\ref{cor:E*可分点}~) 知 $ \exists f\in\Star{E} $, 使得 $ f(x)\ne f(y) $. 此时 $ f(x_{n})\to f(x) $ 且 $ f(x_{n})\to f(y) $, 由强极限的唯一性知矛盾, 故只能 $ x=y $.\qed
	\end{Proof}

	\begin{Theorem}[Mazur]
		设 $ E $ 是赋范空间,  $ (x_{n})_{n\geqslant1} $ 弱收敛于 $ x_{0} $, 则 $ \forall \varepsilon>0, \exists\seq[m]{\lambda}>0 $ 满足 $ \sum\limits_{i=1}^{m}\lambda_{i}=1 $, 使得 $ \norm{x_{0}-\sum\limits_{i=1}^{m}\lambda_{i}x_{i}}<\varepsilon $.
	\end{Theorem}

	\begin{Proof}
		记 $ C = \baro{\conv(x_{n})_{n\geqslant1}} $, 则 $ C $ 是闭凸集, 若 $ x_{0}\ne C $, 由 Hahn-Banach 严格隔离定理可知 $  $, 使
		\[
			\exists f\in\Star{E}\,\exists\alpha\in\R\,\forall a\in A\,((\Re f)(x_{0})<\alpha<(\Re f)(a)),
		\]
		分别取 $ a=x_{i} $ 可知 $ (\Re f)(x_{n})>\alpha>(\Re f)(x_{0}) $. 由 $ x_{n}\weakto x_{0} $ 可知 $ (\Re f)(x_{n})\to (\Re f)(x_{0}) $, 矛盾, 于是 $ x_{0}\in C $, $ \exists y_{n}\in\conv(x_{n})_{n\geqslant1} $, 使得 $ y_{n}\to x_{0} $.\qed
	\end{Proof}
	\begin{Definition}[弱拓扑]\index{R!弱拓扑}\label{def:弱拓扑}
		对 $ x\in E, f\in\Star{E} $, 定义
		\[
			V(x, \seq{f}, \varepsilon):=\{ y:\abs{f_{k}(y)-f_{k}(x)}<\varepsilon, k=1, 2\dots, n \}
		\]
		为 $ x $ 点的开邻域, 称以此为开邻域基生成的拓扑为\textbf{弱拓扑}.
	\end{Definition}
	\begin{Remark}
		弱拓扑是使得 $ f\in\Star{E} $ 仍连续的最弱拓扑.
	\end{Remark}
	\begin{Remark}
		当我们考虑 $ E $ 上相应弱拓扑的某个性质的时候, 约定在此性质前面加上前缀``$ w $--''. 比如称 $ A\subset E $ 是 ``$ w $--闭'' 的.
	\end{Remark}

	\begin{Definition}[弱*收敛]\index{R!弱*收敛}\label{def:弱*收敛}
		设 $ E $ 是赋范空间, $ (f_{n})_{n\geqslant1} $ 是 $ \Star{E} $ 中的序列, 若 $ \forall x\in E $ 都有
		\[
			\lim_{n\to\infty}f_{n}(x)=f(x),
		\]
		则称 $ f_{n} $ \textbf{弱*收敛} 到 $ f $, 记作 $ f_{n}\sweakto f $, 并称 $ f $ 是 $ (f_{n})_{n\geqslant1} $ 的\textbf{弱*极限}.
	\end{Definition}
	\begin{Definition}[弱*拓扑]\index{R!弱*拓扑}\label{def:弱*拓扑}
		对 $ f\in\Star{E}, x\in E $, 定义
		\[
			V(f, \seq{x}, \varepsilon):=\{ g\in\Star{E}:\abs{g(x_{k})-f(x_{k})}<\varepsilon, k=1, 2\dots, n \}
		\]
		是 $ f $ 点的开邻域, 称以此为开邻域基生成的拓扑为\textbf{弱*拓扑}.
	\end{Definition}
	\begin{Remark}
		同样地, 当我们考虑 $ \Star{E} $ 上的相应于弱*拓扑的某个性质时, 约定在此性质前面加上前缀 ``$\Star{w}$--''
	\end{Remark}

\subsection{极性}
	以下讨论中因涉及 $ E, \Star{E}, E^{**} $, 故接下来只用所带星号数目的不同来区分不同空间中的元素.
	
	\begin{Definition}[极]\index{J!极}\label{def:极}
		设 $ E $ 是赋范空间, $ A\subset E $, 则 $ \Star{E} $ 中的子集
		\[
			A\degree = \{ \Star{x}\in\Star{E}:\abs{\Star{x}(x)}\leqslant1, \forall x\in A \}
		\]
		称为 $ A $ 的\textbf{极}. (或\textbf{极集})
	\end{Definition}

	\begin{Remark}
		若 $ A $ 是线性空间, 则 $ A\degree=\{ \Star{x}\in\Star{E}:\Star{x}|_{A}=0 \} $.
	\end{Remark}
	\begin{Proposition}\label{prop:极的w*闭性}
		设 $ E $ 是赋范空间, $ A\subset E $, 则 $ A\degree $ 是凸平衡的 $ \Star{w} $--闭集.
	\end{Proposition}
	\begin{Proof}
		任取 $ \Star{x}, \Star{y}\in A\degree, t\in[0, 1] $, 由
		\[
			\norm{(t\Star{x}+(1-t)\Star{y})(x)}=\norm{t\Star{x}(x)+(1-t)\Star{y}(x)}\leqslant t+1-t=1
		\]
		可知 $ A\degree $ 是凸的, 再任取 $ \lambda $ 满足 $ \abs{\lambda}\leqslant1 $. $ \forall \Star{x}\in A\degree $, 由
		\[
			\abs{\lambda\Star{x}(x)}=\abs{\lambda}\abs{\Star{x}(x)}\leqslant\abs{\lambda}\leqslant1
		\]
		可知 $ \lambda\Star{x}\in A\degree $, 故 $ A\degree $ 是平衡的. 而 $ \forall x\in A $, $ x^{**} $ 在 $ E $ 上 $ \Star{w} $-连续. 从而
		\[
			A\degree=\bigcap_{x\in A}\{ \Star{x}\in\Star{E}:\abs{x^{**}(\Star{x})}\leqslant1 \}=\bigcap_{x\in A}(x^{**})^{-1}\left( \bar{B}_{\Star{E}} \right).
		\]
		是 $ \Star{w} $--闭的.\qed
	\end{Proof}

	\begin{Proposition}
		设 $ E $ 是赋范空间, 则:
		\begin{enumerate}[(1)]
			\item 若 $ A\subset B\subset E $, 则 $ B\degree\subset A\degree $;
			\item $ \forall\lambda\ne 0 $, 有 $ (\lambda A)\degree=\frac{1}{\lambda}A\degree $;
			\item $\left( \bigcup_{i\in\alpha}A_{i} \right)\degree = \bigcap_{i\in\alpha}A_{i}\degree $.
		\end{enumerate}
	\end{Proposition}
	\begin{Proof}
		(1) 设 $ \Star{y}\in B\degree $, 则 $ \forall x\in B\,(\abs{\Star{y}(x)}\leqslant1) $. 由 $ A\subset B $ 知 $ \forall x\in A\,(\abs{\Star{y}(x)}\leqslant1) $. 于是 $ \Star{y}\in A\degree $, 即 $ B\degree\subset A\degree $.

		(2) 任取 $ \Star{x}\in(\lambda A)\degree $, 由
		\[
			\forall x\in A\,(\abs{\Star{x}(\lambda x)}\leqslant1)\Longleftrightarrow \lambda \Star{x}\in A\degree\Longleftrightarrow \Star{x}\in \frac{1}{\lambda}A\degree
		\]
		知 $ (\lambda A)\degree=\frac{1}{\lambda}A\degree $.

		(3) 设 $ \Star{x}\in\big(\bigcup_{i\in\alpha}A_{i}\big)\degree $, 由
		\[
			\begin{aligned}
				\forall x\in\bigcup_{i\in\alpha}A_{i}\,(\abs{\Star{x}(x)}\leqslant1) & \Longleftrightarrow\forall i\in\alpha\,\forall x\in A_{i}\,(\abs{\Star{x}(x)}\leqslant1) \\
				& \Longleftrightarrow \forall i\in\alpha\,(\Star{x}\in A\degree_{i})\Longleftrightarrow \Star{x}\in\bigcap_{i\in\alpha}A_{i}\degree.
			\end{aligned}
		\]
		知 $ \left( \bigcup_{i\in\alpha}A_{i} \right)\degree = \bigcap_{i\in\alpha}A_{i}\degree $. \qed
	\end{Proof}
	记 $ \convba A $ 是 $ A $ 的凸平衡包, 即包含 $ A $ 的最小凸平衡集
	\[
		\convba A=\left\{ \sum_{i=1}^{n}\lambda_{i}x_{i}: x_{i}\in A, n\in\N, \sum_{i=1}^{n}\abs{\lambda_{i}}\leqslant1 \right\}.
	\]

	\begin{Proposition}
		$ (\baro{\convba A})\degree=A\degree $.
	\end{Proposition}
	\begin{Proof}
		由 $ A\subset\baro{\convba A} $ 知 $ (\baro{\convba A})\degree\subset A\degree $. 下证反向不等式, 设 $ \Star{x}\in A\degree $, 因为对任意 $ x\in A $ 都有 $(\abs{\Star{x}(x)}\leqslant1) $, 则
		\[
			\abs{\Star{x}\left( \sum_{i=1}^{n}\lambda_{i}x_{i} \right)}\leqslant\sum_{i=1}^{n}\abs{\lambda_{i}}\abs{\Star{x}(x_{i})}\leqslant\sum_{i=1}^{n}\abs{\lambda_{i}}\leqslant1.
		\]
		从而 $ \forall x\in\baro{\convba A}\,(\abs{\Star{x}(x)}\leqslant1) $, 即 $ \Star{x}\in(\baro{\convba A})\degree $, 也即 $ A\degree\subset(\baro{\convba A})\degree $.\qed
	\end{Proof}
	
	\begin{Definition}[对偶空间的极]\label{def:对偶空间的极}
		设 $ E $ 是赋范空间, $ \Star{E} $ 是 $ E $ 是对偶空间, 对 $ B\subset\Star{E} $, 称
		\[
			B\degree=\{ x\in E:\abs{\Star{x}(x)}\leqslant1, \Star{x}\in B \}
		\]
		为 $ B $ 的\textbf{极}.
	\end{Definition}
	\begin{Definition}[双极]\index{S!双极}\label{def:双极}
		设 $ E $ 是赋范空间, $ A\subset E $, 则称 $ (A\degree)\degree=A\degree{}\degree $ 为 $ A $ 的\textbf{双极}.
	\end{Definition}

	\begin{Theorem}[双极定理]
		设 $ E $ 是赋范空间, $ A\subset E, B\subset\Star{E} $, 则
		\begin{enumerate}[(1)]
			\item $ A\degree{}\degree=A $ 当且仅当 $ A $ 是凸平衡的 $ w $--闭集;
			\item $ B\degree{}\degree=B $ 当且仅当 $ B $ 是凸平衡的 $ \Star{w} $--闭集.
		\end{enumerate}
	\end{Theorem}
	\begin{Proof}
		(1) \textsl{必要性}. 由命题~\ref{prop:极的w*闭性}~知 $ A=(A\degree)\degree $ 是凸平衡的 $ w $--闭集.

		\textsl{充分性}. 由双极的定义可知 $ A\subset A\degree{}\degree $, 若存在 $ x\in A\degree{}\degree\sm A $, 则对 $ \{ x \}, A $ 使用 Hahn-Banach 定理, 知 $ \exists\Star{x}\in\Star{E} $ 使得 $ \Star{x}(x)>1 $ 且 $ \sup\limits_{a\in A}\abs{\Star{x}(a)}\leqslant1 $. 由 Mazur 定理,  $ A $ 在范数诱导的拓扑下是闭的, 由 $ \sup\limits_{a\in A}\abs{\Star{x}(a)}\leqslant1 $ 知 $ \Star{x}\in A\degree $. 但由 $ \Star{x}(x)>1 $ 知 $ x\notin A\degree{}\degree $, 从而 $ A\degree{}\degree\subset A $, 从而 $ A\degree{}\degree= A $

		(2) 与 (1) 类似可证.\qed
	\end{Proof}
	
	
	
	
	